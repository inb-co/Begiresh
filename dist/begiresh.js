(function(k){"object"===typeof exports&&"undefined"!==typeof module?module.exports=k():"function"===typeof define&&define.amd?define([],k):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).Begiresh=k()})(function(){return function a(f,e,g){function d(c,l){if(!e[c]){if(!f[c]){var h="function"==typeof require&&require;if(!l&&h)return h(c,!0);if(b)return b(c,!0);h=Error("Cannot find module '"+c+"'");throw h.code="MODULE_NOT_FOUND",h;}h=e[c]={exports:{}};
f[c][0].call(h.exports,function(b){var a=f[c][1][b];return d(a?a:b)},h,h.exports,a,f,e,g)}return e[c].exports}for(var b="function"==typeof require&&require,c=0;c<g.length;c++)d(g[c]);return d}({1:[function(a,f,e){function g(d,b){return b.querySelector(d)}e=f.exports=function(d,b){b=b||document;return g(d,b)};e.all=function(d,b){b=b||document;return b.querySelectorAll(d)};e.engine=function(d){if(!d.one)throw Error(".one callback required");if(!d.all)throw Error(".all callback required");g=d.one;e.all=
d.all;return e}},{}],2:[function(a,f,e){e=f.exports=function(a){a||(a={});"string"===typeof a&&(a={cookie:a});void 0===a.cookie&&(a.cookie="");return{get:function(d){for(var b=a.cookie.split(/;\s*/),c=0;c<b.length;c++){var e=b[c].split("=");if(unescape(e[0])===d)return unescape(e[1])}},set:function(d,b,c){c||(c={});d=escape(d)+"="+escape(b);c.expires&&(d+="; expires="+c.expires);c.path&&(d+="; path="+escape(c.path));return a.cookie=d}}};"undefined"!==typeof document&&(a=e(document),e.get=a.get,e.set=
a.set)},{}],3:[function(a,f,e){a=a("has-dom");f.exports=a()?document:null},{"has-dom":4}],4:[function(a,f,e){f.exports=function(){return"undefined"!==typeof window&&"undefined"!==typeof document&&"function"===typeof document.createElement}},{}],5:[function(a,f,e){f.exports=function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],d;for(d in c)g.call(c,d)&&(a[d]=c[d])}return a};var g=Object.prototype.hasOwnProperty},{}],6:[function(a,f,e){var g=a("xtend/mutable"),d=a("component-query"),b=
a("get-doc"),c=a("cookie-cutter"),m=navigator.userAgent||navigator.vendor||window.opera,l=(navigator.language||navigator.userLanguage||navigator.browserLanguage).slice(0,2)||"fa",h=Number(new Date),n=b&&b.documentElement,q={googlePlay:{name:"\u06af\u0648\u06af\u0644\u200c\u067e\u0644\u06cc",appMeta:"google-play-app",getStoreLink:function(){return"http://play.google.com/store/apps/details?id="+this.appId+"&hl="+this.options.storeLang}},cafeBazaar:{name:"\u06a9\u0627\u0641\u0647\u200c\u0628\u0627\u0632\u0627\u0631",
appMeta:"cafe-bazaar-app",getStoreLink:function(){return"https://cafebazaar.ir/app/"+this.appId+"/?l="+this.options.storeLang}},myket:{name:"\u0645\u0627\u06cc\u06a9\u062a",appMeta:"myket-app",getStoreLink:function(){return"https://myket.ir/app/"+this.appId+"/?lang="+this.options.storeLang}}},p=["android-touch-icon","apple-touch-icon-precomposed","apple-touch-icon"];a=function(a){this.options=g({},{price:"\u0631\u0627\u06cc\u06af\u0627\u0646",icon:"",daysHidden:15,daysReminder:90,storeLang:l,store:"googlePlay",
button:"\u0628\u06af\u06cc\u0631\u0634",force:!1,onDownload:function(){},onClose:function(){},appStoreLanguage:null},a||a||{});null!=this.options.appStoreLanguage&&(this.options.storeLang=this.options.appStoreLanguage);!/windows phone/i.test(m)&&/android/i.test(m)&&(this.type="android");a=!this.type;var b=navigator.standalone,d=c.get("begiresh-closed"),e=c.get("begiresh-installed");if(this.options.force||!(a||b||d||e))g(this,q[this.options.store]),this.parseAppId()&&(this.create(),this.show())};a.prototype=
{constructor:a,create:function(){var a=this.getStoreLink(),c=this.options.price+" \u062f\u0631 "+this.name,e;this.options.icon?e=this.options.icon:e=this.getIcon();var f=b.createElement("div");f.className="begiresh";f.innerHTML='<div class="begiresh-container"><a href="javascript:void(0);" class="begiresh-close"></a><div class="begiresh-info"><span class="begiresh-icon" style="background-image: url('+e+')"></span><div class="begiresh-meta"><span class="begiresh-title">'+this.options.title+'</span><span class="begiresh-author">'+
this.options.author+'</span><span class="begiresh-store">'+c+'</span></div></div><a href="'+a+'" class="begiresh-download"><span class="begiresh-download-text">'+this.options.button+"</span></a></div>";b.body?b.body.appendChild(f):b&&b.addEventListener("DOMContentLoaded",function(){b.body.appendChild(f)});d(".begiresh-download",f).addEventListener("click",this.install.bind(this),!1);d(".begiresh-close",f).addEventListener("click",this.close.bind(this),!1)},hide:function(){n.classList.remove("begiresh-show")},
show:function(){n.classList.add("begiresh-show")},close:function(){this.options.onClose.call();this.hide();c.set("begiresh-closed","true",{path:"/",expires:this.getExpirationDate(this.options.daysHidden)})},install:function(){this.options.onDownload.call();this.hide();c.set("begiresh-installed","true",{path:"/",expires:this.getExpirationDate(this.options.daysReminder)})},parseAppId:function(){var a=d('meta[name="'+this.appMeta+'"]');if(a)return this.appId=/app-id=([^\s,]+)/.exec(a.getAttribute("content"))[1]},
getExpirationDate:function(a){return new Date(h+864E5*a)},getIcon:function(){for(var a=0;a<p.length;a++){var b=d('link[rel="'+p[a]+'"]');if(b)return b.getAttribute("href")}}};f.exports=a},{"component-query":1,"cookie-cutter":2,"get-doc":3,"xtend/mutable":5}]},{},[6])(6)});
